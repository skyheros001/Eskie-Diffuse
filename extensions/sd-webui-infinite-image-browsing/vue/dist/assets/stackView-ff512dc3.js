import{d as G,u as ce,g as W,_ as Me,c as a,a as se,P as Z,D as le,f as Ae,w as Ze,b as et,e as tt,h as Se,M as ie,i as nt,j as at,F as ue,o as c,k as h,l as u,m as E,t as d,n as Y,p as D,q as Be,r as rt,s as ot,v as M,x as s,y as p,z as e,A as V,B as st,C as oe,E as lt,G as it,H as ut,I as dt,S as ct,J as pt,K as mt,L as vt,N as Pe,O as ft,Q as kt,R as _t,T as gt,U as Ct,V as bt,W as yt}from"./index-00b4fcdc.js";import{S as q,s as ht,L as It,R as wt,f as $t}from"./fullScreenContextMenu-abfd166b.js";import{F as z,N as St,_ as Pt}from"./numInput-cba4b567.js";import"./index-57be937e.js";import{D as Fe}from"./index-9c72d52d.js";/* empty css              *//* empty css              */import{u as xt,a as Mt,b as At,c as Bt,d as Ft,e as Rt,f as Nt,s as Dt,g as Et,F as zt}from"./FileItem-40e08df3.js";import"./functionalCallableComp-fa3cc081.js";import"./db-6498d1af.js";var Tt=["class","style"],Vt=function(){return{prefixCls:String,href:String,separator:Z.any,overlay:Z.any,onClick:Function}};const K=G({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Vt(),slots:["separator","overlay"],setup:function(r,b){var f=b.slots,_=b.attrs,I=ce("breadcrumb",r),C=I.prefixCls,S=function(w,m){var i=W(f,r,"overlay");return i?a(Fe,{overlay:i,placement:"bottom"},{default:function(){return[a("span",{class:"".concat(m,"-overlay-link")},[w,a(le,null,null)])]}}):w};return function(){var P,w=(P=W(f,r,"separator"))!==null&&P!==void 0?P:"/",m=W(f,r),i=_.class,g=_.style,k=Me(_,Tt),v;return r.href!==void 0?v=a("a",se({class:"".concat(C.value,"-link"),onClick:r.onClick},k),[m]):v=a("span",se({class:"".concat(C.value,"-link"),onClick:r.onClick},k),[m]),v=S(v,C.value),m?a("span",{class:i,style:g},[v,w&&a("span",{class:"".concat(C.value,"-separator")},[w])]):null}}});var Lt=function(){return{prefixCls:String,routes:{type:Array},params:Z.any,separator:Z.any,itemRender:{type:Function}}};function Ot(o,r){if(!o.breadcrumbName)return null;var b=Object.keys(r).join("|"),f=o.breadcrumbName.replace(new RegExp(":(".concat(b,")"),"g"),function(_,I){return r[I]||_});return f}function xe(o){var r=o.route,b=o.params,f=o.routes,_=o.paths,I=f.indexOf(r)===f.length-1,C=Ot(r,b);return I?a("span",null,[C]):a("a",{href:"#/".concat(_.join("/"))},[C])}const L=G({compatConfig:{MODE:3},name:"ABreadcrumb",props:Lt(),slots:["separator","itemRender"],setup:function(r,b){var f=b.slots,_=ce("breadcrumb",r),I=_.prefixCls,C=_.direction,S=function(i,g){return i=(i||"").replace(/^\//,""),Object.keys(g).forEach(function(k){i=i.replace(":".concat(k),g[k])}),i},P=function(i,g,k){var v=nt(i),$=S(g||"",k);return $&&v.push($),v},w=function(i){var g=i.routes,k=g===void 0?[]:g,v=i.params,$=v===void 0?{}:v,x=i.separator,A=i.itemRender,B=A===void 0?xe:A,F=[];return k.map(function(y){var R=S(y.path,$);R&&F.push(R);var O=[].concat(F),j=null;return y.children&&y.children.length&&(j=a(ie,null,{default:function(){return[y.children.map(function(T){return a(ie.Item,{key:T.path||T.breadcrumbName},{default:function(){return[B({route:T,params:$,routes:k,paths:P(O,T.path,$)})]}})})]}})),a(K,{overlay:j,separator:x,key:R||y.breadcrumbName},{default:function(){return[B({route:y,params:$,routes:k,paths:O})]}})})};return function(){var m,i,g,k=r.routes,v=r.params,$=v===void 0?{}:v,x=Ae(W(f,r)),A=(m=W(f,r,"separator"))!==null&&m!==void 0?m:"/",B=r.itemRender||f.itemRender||xe;k&&k.length>0?g=w({routes:k,params:$,separator:A,itemRender:B}):x.length&&(g=x.map(function(y,R){return Ze(et(y.type)==="object"&&(y.type.__ANT_BREADCRUMB_ITEM||y.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),tt(y,{separator:A,key:R})}));var F=(i={},Se(i,I.value,!0),Se(i,"".concat(I.value,"-rtl"),C.value==="rtl"),i);return a("div",{class:F},[g])}}});var jt=["separator","class"],Ut=function(){return{prefixCls:String}};const de=G({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Ut(),setup:function(r,b){var f=b.slots,_=b.attrs,I=ce("breadcrumb",r),C=I.prefixCls;return function(){var S;_.separator;var P=_.class,w=Me(_,jt),m=Ae((S=f.default)===null||S===void 0?void 0:S.call(f));return a("span",se({class:["".concat(C.value,"-separator"),P]},w),[m.length>0?m:"/"])}}});L.Item=K;L.Separator=de;L.install=function(o){return o.component(L.name,L),o.component(K.name,K),o.component(de.name,de),o};z.useInjectFormItemContext=at;z.ItemRest=ue;z.install=function(o){return o.component(z.name,z),o.component(z.Item.name,z.Item),o.component(ue.name,ue),o};q.setDefaultIndicator=ht;q.install=function(o){return o.component(q.name,q),o};const Wt={class:"base-info"},qt=G({__name:"BaseFileListInfo",props:{fileNum:{},selectedFileNum:{}},setup(o){return(r,b)=>(c(),h("div",Wt,[u("span",null,[E(d(r.$t("items",[r.fileNum]))+" ",1),r.selectedFileNum?(c(),h(Y,{key:0},[E(", "+d(r.$t("selectedItems",[r.selectedFileNum])),1)],64)):D("",!0)])]))}});const Kt=Be(qt,[["__scopeId","data-v-afd25667"]]),Gt={class:"hint"},Qt={class:"location-bar"},Ht={key:0,class:"breadcrumb"},Jt=["onClick"],Xt={key:3,class:"location-act"},Yt={class:"actions"},Zt=["onClick"],en={style:{width:"512px",background:"var(--zp-primary-background)",padding:"16px","border-radius":"4px","box-shadow":"0 0 4px var(--zp-secondary-background)",border:"1px solid var(--zp-secondary-background)"}},tn={style:{padding:"4px"}},nn={style:{padding:"4px"}},an={style:{padding:"4px"}},rn={key:0,class:"view"},on={style:{padding:"16px 0 64px"}},sn={key:0,class:"preview-switch"},ln=G({__name:"stackView",props:{tabIdx:{},paneIdx:{},path:{},walkModePath:{},stackKey:{}},setup(o){const r=o,b=rt(),{scroller:f,stackViewEl:_,props:I,multiSelectedIdxs:C,spinning:S}=xt().toRefs(),{currLocation:P,currPage:w,refresh:m,copyLocation:i,back:g,openNext:k,stack:v,quickMoveTo:$,addToSearchScanPathAndQuickMove:x,searchPathInfo:A,locInputValue:B,isLocationEditing:F,onLocEditEnter:y,onEditBtnClick:R,share:O,selectAll:j,onCreateFloderBtnClick:Q,onWalkBtnClick:T,showWalkButton:pe,searchInCurrentDir:me}=Mt(),{gridItems:Re,sortMethodConv:Ne,moreActionsDropdownShow:ee,sortedFiles:U,sortMethod:te,itemSize:ve,loadNextDir:De,loadNextDirLoading:Ee,canLoadNext:ze,onScroll:Te,cellWidth:H}=At(),{onDrop:Ve,onFileDragStart:Le,onFileDragEnd:Oe}=Bt(),{onFileItemClick:je,onContextMenuClick:fe,showGenInfo:J,imageGenInfo:ke,q:Ue}=Ft({openNext:k}),{previewIdx:X,onPreviewVisibleChange:We,previewing:_e,previewImgMove:ge,canPreview:Ce}=Rt(),{showMenuIdx:ne}=Nt();return ot(()=>r,()=>{I.value=r;const l=Dt.get(r.stackKey??"");l&&(v.value=l.slice())},{immediate:!0}),(l,t)=>{const qe=ft,Ke=kt,Ge=_t,be=K,ye=L,Qe=gt,He=Ct,he=bt,ae=yt,Ie=ie,re=Fe,Je=St,we=Pt,Xe=z,Ye=q;return c(),M(Ye,{spinning:e(S),size:"large"},{default:s(()=>[a(qe,{style:{display:"none"}}),u("div",{ref_key:"stackViewEl",ref:_,onDragover:t[28]||(t[28]=p(()=>{},["prevent"])),onDrop:t[29]||(t[29]=p(n=>e(Ve)(n),["prevent"])),class:"container"},[a(Ge,{visible:e(J),"onUpdate:visible":t[1]||(t[1]=n=>V(J)?J.value=n:null),width:"70vw","mask-closable":"",onOk:t[2]||(t[2]=n=>J.value=!1)},{cancelText:s(()=>[]),default:s(()=>[a(Ke,{active:"",loading:!e(Ue).isIdle},{default:s(()=>[u("div",{style:{width:"100%","word-break":"break-all","white-space":"pre-line","max-height":"70vh",overflow:"auto","z-index":"9999"},onDblclick:t[0]||(t[0]=n=>e(st)(e(ke)))},[u("div",Gt,d(l.$t("doubleClickToCopy")),1),E(" "+d(e(ke)),1)],32)]),_:1},8,["loading"])]),_:1},8,["visible"]),u("div",Qt,[r.walkModePath?(c(),h("div",Ht,[a(Qe,null,{title:s(()=>[E(d(l.$t("walk-mode-move-message")),1)]),default:s(()=>[a(ye,{style:{flex:"1"}},{default:s(()=>[(c(!0),h(Y,null,oe(e(v),(n,N)=>(c(),M(be,{key:N},{default:s(()=>[u("span",null,d(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),1)]),_:2},1024))),128))]),_:1})]),_:1})])):(c(),h("div",{key:1,class:"breadcrumb",style:lt({flex:e(F)?1:""})},[e(F)?(c(),M(He,{key:0,style:{flex:"1"},value:e(B),"onUpdate:value":t[3]||(t[3]=n=>V(B)?B.value=n:null),onClick:t[4]||(t[4]=p(()=>{},["stop"])),onKeydown:t[5]||(t[5]=p(()=>{},["stop"])),onPressEnter:e(y),"allow-clear":""},null,8,["value","onPressEnter"])):(c(),M(ye,{key:1,style:{flex:"1"}},{default:s(()=>[(c(!0),h(Y,null,oe(e(v),(n,N)=>(c(),M(be,{key:N},{default:s(()=>[u("a",{onClick:p($e=>e(g)(N),["prevent"])},d(n.curr==="/"?l.$t("root"):n.curr.replace(/:\/$/,l.$t("drive"))),9,Jt)]),_:2},1024))),128))]),_:1})),e(F)?(c(),M(he,{key:2,size:"small",onClick:e(y),type:"primary"},{default:s(()=>[E(d(l.$t("go")),1)]),_:1},8,["onClick"])):(c(),h("div",Xt,[u("a",{onClick:t[6]||(t[6]=p((...n)=>e(i)&&e(i)(...n),["prevent"])),class:"copy"},d(l.$t("copy")),1),u("a",{onClick:t[7]||(t[7]=p((...n)=>e(R)&&e(R)(...n),["prevent","stop"]))},d(l.$t("edit")),1)]))],4)),u("div",Yt,[u("a",{class:"opt",onClick:t[8]||(t[8]=p((...n)=>e(m)&&e(m)(...n),["prevent"]))},d(l.$t("refresh")),1),a(re,null,{overlay:s(()=>[a(Ie,null,{default:s(()=>[a(ae,{key:"tag-search"},{default:s(()=>[u("a",{onClick:t[10]||(t[10]=p(n=>e(me)("tag-search"),["prevent"]))},d(l.$t("imgSearch")),1)]),_:1}),a(ae,{key:"tag-search"},{default:s(()=>[u("a",{onClick:t[11]||(t[11]=p(n=>e(me)("fuzzy-search"),["prevent"]))},d(l.$t("fuzzy-search")),1)]),_:1})]),_:1})]),default:s(()=>[u("a",{class:"opt",onClick:t[9]||(t[9]=p(()=>{},["prevent"]))},[E(d(l.$t("search"))+" ",1),a(e(le))])]),_:1}),e(pe)?(c(),h("a",{key:0,class:"opt",onClick:t[12]||(t[12]=p((...n)=>e(T)&&e(T)(...n),["prevent"]))}," Walk ")):D("",!0),u("a",{class:"opt",onClick:t[13]||(t[13]=p((...n)=>e(j)&&e(j)(...n),["prevent","stop"]))},d(l.$t("selectAll")),1),e(it)?D("",!0):(c(),h("a",{key:1,class:"opt",onClick:t[14]||(t[14]=p((...n)=>e(O)&&e(O)(...n),["prevent"]))},d(l.$t("share")),1)),a(re,null,{overlay:s(()=>[a(Ie,null,{default:s(()=>[(c(!0),h(Y,null,oe(e(b).quickMovePaths,n=>(c(),M(ae,{key:n.dir},{default:s(()=>[u("a",{onClick:p(N=>e($)(n.dir),["prevent"])},d(n.zh),9,Zt)]),_:2},1024))),128))]),_:1})]),default:s(()=>[u("a",{class:"opt",onClick:t[15]||(t[15]=p(()=>{},["prevent"]))},[E(d(l.$t("quickMove"))+" ",1),a(e(le))])]),_:1}),a(re,{trigger:["click"],visible:e(ee),"onUpdate:visible":t[24]||(t[24]=n=>V(ee)?ee.value=n:null),placement:"bottomLeft",getPopupContainer:n=>n.parentNode},{overlay:s(()=>[u("div",en,[a(Xe,ut(dt({labelCol:{span:6},wrapperCol:{span:18}})),{default:s(()=>[a(we,{label:l.$t("gridCellWidth")},{default:s(()=>[a(Je,{modelValue:e(H),"onUpdate:modelValue":t[17]||(t[17]=n=>V(H)?H.value=n:null),max:1024,min:64,step:64},null,8,["modelValue"])]),_:1},8,["label"]),a(we,{label:l.$t("sortingMethod")},{default:s(()=>[a(e(ct),{value:e(te),"onUpdate:value":t[18]||(t[18]=n=>V(te)?te.value=n:null),onClick:t[19]||(t[19]=p(()=>{},["stop"])),conv:e(Ne),options:e(pt)},null,8,["value","conv","options"])]),_:1},8,["label"]),u("div",tn,[e(A)?e(A).can_delete?(c(),h("a",{key:1,onClick:t[21]||(t[21]=p((...n)=>e(x)&&e(x)(...n),["prevent"]))},d(l.$t("removeFromSearchScanPathAndQuickMove")),1)):D("",!0):(c(),h("a",{key:0,onClick:t[20]||(t[20]=p((...n)=>e(x)&&e(x)(...n),["prevent"]))},d(l.$t("addToSearchScanPathAndQuickMove")),1))]),u("div",nn,[u("a",{onClick:t[22]||(t[22]=p(n=>e(mt)(e(P)+"/"),["prevent"]))},d(l.$t("openWithLocalFileBrowser")),1)]),u("div",an,[u("a",{onClick:t[23]||(t[23]=p((...n)=>e(Q)&&e(Q)(...n),["prevent"]))},d(l.$t("createFolder")),1)])]),_:1},16)])]),default:s(()=>[u("a",{class:"opt",onClick:t[16]||(t[16]=p(()=>{},["prevent"]))},d(l.$t("more")),1)]),_:1},8,["visible","getPopupContainer"])])]),e(w)?(c(),h("div",rn,[a(e(Et),{class:"file-list",items:e(U),ref_key:"scroller",ref:f,onScroll:e(Te),"item-size":e(ve).first,"key-field":"fullpath","item-secondary-size":e(ve).second,gridItems:e(Re)},{default:s(({item:n,index:N})=>[a(zt,{idx:parseInt(N),file:n,"full-screen-preview-image-url":e(U)[e(X)]?e(vt)(e(U)[e(X)]):"","show-menu-idx":e(ne),"onUpdate:showMenuIdx":t[25]||(t[25]=$e=>V(ne)?ne.value=$e:null),selected:e(C).includes(N),"cell-width":e(H),onFileItemClick:e(je),onDragstart:e(Le),onDragend:e(Oe),onPreviewVisibleChange:e(We),onContextMenuClick:e(fe),"is-selected-mutil-files":e(C).length>1},null,8,["idx","file","full-screen-preview-image-url","show-menu-idx","selected","cell-width","onFileItemClick","onDragstart","onDragend","onPreviewVisibleChange","onContextMenuClick","is-selected-mutil-files"])]),after:s(()=>[u("div",on,[r.walkModePath?(c(),M(he,{key:0,onClick:e(De),loading:e(Ee),block:"",type:"primary",disabled:!e(ze),ghost:""},{default:s(()=>[E(d(l.$t("loadNextPage")),1)]),_:1},8,["onClick","loading","disabled"])):D("",!0)])]),_:1},8,["items","onScroll","item-size","item-secondary-size","gridItems"]),e(_e)?(c(),h("div",sn,[a(e(It),{onClick:t[26]||(t[26]=n=>e(ge)("prev")),class:Pe({disable:!e(Ce)("prev")})},null,8,["class"]),a(e(wt),{onClick:t[27]||(t[27]=n=>e(ge)("next")),class:Pe({disable:!e(Ce)("next")})},null,8,["class"])])):D("",!0)])):D("",!0)],544),e(_e)?(c(),M($t,{key:0,file:e(U)[e(X)],idx:e(X),onContextMenuClick:e(fe)},null,8,["file","idx","onContextMenuClick"])):D("",!0),a(Kt,{"file-num":e(U).length,"selected-file-num":e(C).length},null,8,["file-num","selected-file-num"])]),_:1},8,["spinning"])}}});const Cn=Be(ln,[["__scopeId","data-v-cae217fd"]]);export{Cn as default};
