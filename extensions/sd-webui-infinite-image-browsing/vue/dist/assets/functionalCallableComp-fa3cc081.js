import{cO as ne,cP as re,a as g,P as le,d as Y,j as Q,u as q,Y as oe,aS as ue,ay as ie,am as se,w as ce,X as S,f as de,_ as H,$ as K,h as I,c,s as z,ac as E,a0 as fe,i as ve,a3 as pe,c3 as F,R as D,cQ as me,L as W,V as he,cv as be,a5 as P,a9 as ge,a8 as ye,U as xe,cm as Ce,m as ke}from"./index-00b4fcdc.js";import{V as we}from"./index-57be937e.js";import{j as Ie}from"./db-6498d1af.js";function Se(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=ne(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(s){throw s},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,x=!1,C;return{s:function(){a=a.call(e)},n:function(){var s=a.next();return y=s.done,s},e:function(s){x=!0,C=s},f:function(){try{!y&&a.return!=null&&a.return()}finally{if(x)throw C}}}}var X=1/0,Oe=17976931348623157e292;function Re(e){if(!e)return e===0?e:0;if(e=re(e),e===X||e===-X){var t=e<0?-1:1;return t*Oe}return e===e?e:0}function Ue(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Me=function(){return{name:String,prefixCls:String,options:{type:Array,default:function(){return[]}},disabled:Boolean,id:String}},Ve=function(){return g(g({},Me()),{},{defaultValue:{type:Array},value:{type:Array},onChange:{type:Function},"onUpdate:value":{type:Function}})},_e=function(){return{prefixCls:String,defaultChecked:{type:Boolean,default:void 0},checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:le.any,name:String,id:String,indeterminate:{type:Boolean,default:void 0},type:{type:String,default:"checkbox"},autofocus:{type:Boolean,default:void 0},onChange:Function,"onUpdate:checked":Function,onClick:Function,skipGroup:{type:Boolean,default:!1}}},Pe=function(){return g(g({},_e()),{},{indeterminate:{type:Boolean,default:!1}})},J=Symbol("CheckboxGroupContext"),Fe=["indeterminate","skipGroup","id"],je=["onMouseenter","onMouseleave","onInput","class","style"];const _=Y({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:Pe(),setup:function(t,a){var r=a.emit,o=a.attrs,y=a.slots,x=a.expose,C=Q(),d=q("checkbox",t),s=d.prefixCls,m=d.direction,u=oe(J,void 0),w=Symbol("checkboxUniId");ue(function(){!t.skipGroup&&u&&u.registerValue(w,t.value)}),ie(function(){u&&u.cancelValue(w)}),se(function(){ce(t.checked!==void 0||u||t.value===void 0,"Checkbox","`value` is not validate prop, do you mean `checked`?")});var O=function(n){var l=n.target.checked;r("update:checked",l),r("change",n)},M=S(),B=function(){var n;(n=M.value)===null||n===void 0||n.focus()},j=function(){var n;(n=M.value)===null||n===void 0||n.blur()};return x({focus:B,blur:j}),function(){var b,n,l=de((b=y.default)===null||b===void 0?void 0:b.call(y)),f=t.indeterminate,v=t.skipGroup,p=t.id,i=p===void 0?C.id.value:p,k=H(t,Fe),A=o.onMouseenter,N=o.onMouseleave;o.onInput;var V=o.class,Z=o.style,ee=H(o,je),h=g(g({},k),{},{id:i,prefixCls:s.value},ee);u&&!v?(h.onChange=function(){for(var R=arguments.length,U=new Array(R),G=0;G<R;G++)U[G]=arguments[G];r.apply(void 0,["change"].concat(U)),u.toggleOption({label:l,value:t.value})},h.name=u.name.value,h.checked=u.mergedValue.value.indexOf(t.value)!==-1,h.disabled=t.disabled||u.disabled.value,h.indeterminate=f):h.onChange=O;var te=K((n={},I(n,"".concat(s.value,"-wrapper"),!0),I(n,"".concat(s.value,"-rtl"),m.value==="rtl"),I(n,"".concat(s.value,"-wrapper-checked"),h.checked),I(n,"".concat(s.value,"-wrapper-disabled"),h.disabled),n),V),ae=K(I({},"".concat(s.value,"-indeterminate"),f));return c("label",{class:te,style:Z,onMouseenter:A,onMouseleave:N},[c(we,g(g({},h),{},{class:ae,ref:M}),null),l.length?c("span",null,[l]):null])}}}),T=Y({compatConfig:{MODE:3},name:"ACheckboxGroup",props:Ve(),setup:function(t,a){var r=a.slots,o=a.emit,y=a.expose,x=Q(),C=q("checkbox",t),d=C.prefixCls,s=C.direction,m=S((t.value===void 0?t.defaultValue:t.value)||[]);z(function(){return t.value},function(){m.value=t.value||[]});var u=E(function(){return t.options.map(function(n){return typeof n=="string"||typeof n=="number"?{label:n,value:n}:n})}),w=S(Symbol()),O=S(new Map),M=function(l){O.value.delete(l),w.value=Symbol()},B=function(l,f){O.value.set(l,f),w.value=Symbol()},j=S(new Map);z(w,function(){var n=new Map,l=Se(O.value.values()),f;try{for(l.s();!(f=l.n()).done;){var v=f.value;n.set(v,!0)}}catch(p){l.e(p)}finally{l.f()}j.value=n});var b=function(l){var f=m.value.indexOf(l.value),v=ve(m.value);f===-1?v.push(l.value):v.splice(f,1),t.value===void 0&&(m.value=v);var p=v.filter(function(i){return j.value.has(i)}).sort(function(i,k){var A=u.value.findIndex(function(V){return V.value===i}),N=u.value.findIndex(function(V){return V.value===k});return A-N});o("update:value",p),o("change",p),x.onFieldChange()};return fe(J,{cancelValue:M,registerValue:B,toggleOption:b,mergedValue:m,name:E(function(){return t.name}),disabled:E(function(){return t.disabled})}),y({mergedValue:m}),function(){var n,l=t.id,f=l===void 0?x.id.value:l,v=null,p="".concat(d.value,"-group");return u.value&&u.value.length>0&&(v=u.value.map(function(i){var k;return c(_,{prefixCls:d.value,key:i.value.toString(),disabled:"disabled"in i?i.disabled:t.disabled,indeterminate:i.indeterminate,value:i.value,checked:m.value.indexOf(i.value)!==-1,onChange:i.onChange,class:"".concat(p,"-item")},{default:function(){return[i.label===void 0?(k=r.label)===null||k===void 0?void 0:k.call(r,i):i.label]}})})),c("div",{class:[p,I({},"".concat(p,"-rtl"),s.value==="rtl")],id:f},[v||((n=r.default)===null||n===void 0?void 0:n.call(r))])}}});_.Group=T;_.install=function(e){return e.component(_.name,_),e.component(T.name,T),e};var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};const Ge=Ae;function L(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable}))),r.forEach(function(o){Be(e,o,a[o])})}return e}function Be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var $=function(t,a){var r=L({},t,a.attrs);return c(pe,L({},r,{icon:Ge}),null)};$.displayName="DownloadOutlined";$.inheritAttrs=!1;const Ne=$,He=async e=>(await F.value.get("/files",{params:{folder_path:e}})).data,Ke=async e=>(await F.value.post("/delete_files",{file_paths:e})).data,ze=async(e,t,a)=>(await F.value.post("/move_files",{file_paths:e,dest:t,create_dest_folder:a})).data,We=async(e,t,a)=>(await F.value.post("/copy_files",{file_paths:e,dest:t,create_dest_folder:a})).data,Ee=async e=>{await F.value.post("/mkdirs",{dest_folder:e})},Xe=e=>{const t=[];return e.shiftKey&&t.push("Shift"),e.ctrlKey&&t.push("Ctrl"),e.metaKey&&t.push("Cmd"),(e.code.startsWith("Key")||e.code.startsWith("Digit"))&&t.push(e.code),t.join(" + ")},Le=e=>{const t=S("");return new Promise(a=>{D.confirm({title:P("inputFolderName"),content:()=>c(xe,{value:t.value,"onUpdate:value":r=>t.value=r},null),async onOk(){if(!t.value)return;const r=Ce(e,t.value);await Ee(r),a()}})})},Ye=()=>c("p",{style:{background:"var(--zp-secondary-background)",padding:"8px",borderLeft:"4px solid var(--primary-color)"}},[ke("Tips: "),P("multiSelectTips")]),Qe=e=>{D.confirm({width:"80vw",title:e.name,icon:null,content:()=>c("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},[c("video",{style:{maxHeight:me?"80vh":"60vh"},src:W(e),controls:!0,autoplay:!0},null),c("div",{class:"actions",style:{marginTop:"16px"}},[c(he,{onClick:()=>be([W(e,!0)])},{icon:c(Ne,null,null),default:P("download")})])]),maskClosable:!0,wrapClassName:"hidden-antd-btns-modal"})},qe=()=>{D.confirm({title:P("confirmRebuildImageIndex"),onOk:async()=>{await Ie(),ge.emit("searchIndexExpired"),ye.success(P("rebuildComplete"))}})};export{_ as C,Ye as M,He as a,Le as b,We as c,Ke as d,Qe as e,Xe as g,Ue as l,ze as m,qe as o,Re as t};
